<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FARMhub | Discussion Forum</title>
    <link rel="stylesheet" href="chatpage.css">
</head>

<body>
    <header>
        <h1> <a href="http://localhost/formhub/index.php">FARMhub Discussion Forum</a> </h1>
    </header>
    <main>
        <section class="discussion">
            <article class="post">
                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Aneesh</p>
                </header>
                <p>Hey, everyone! I'm new here. I'm interested in sustainable farming methods. Any recommendations or
                    tips?
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Harshit</p>
                </header>
                <p>Welcome, User1! Sustainable farming is a great choice. Have you considered crop rotation to improve
                    soil fertility?</p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Isha</p>
                </header>
                <p>Crop rotation is indeed crucial, User2. Companion planting can also help deter pests naturally. It's
                    fascinating!
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>


                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Prathvi</p>
                </header>
                <p>Speaking of pests, does anyone have experience with organic pest control methods? I'm struggling with
                    aphids.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>

                <header>
                    <h2>Topic: Farming Techniques</h2>
                    <p>Posted by: Shaarath Kumar</p>
                </header>
                <p> User4, try introducing ladybugs to your garden. They're natural aphid predators and harmless to
                    plants.
                </p>
                <footer>
                    <button class="like-btn" onclick="toggleLike(this)">Like</button>
                    <button class="comment-btn" onclick="toggleCommentForm(this)">Comment</button>
                    <button class="share-btn" onclick="sharePost(this)">Share</button>
                </footer>
                <div class="comments">
                    <ul class="comments-list">
                        <!-- Comments go here -->
                    </ul>
                    <form class="comment-form">
                        <input type="text" placeholder="Add a comment" class="comment-input">
                        <!-- Add this input field for image upload -->
                        <input type="file" accept="image/*" id="image-upload" class="image-upload-input">

                        <button class="submit-comment-btn" onclick="addComment(this)">Submit</button>
                    </form>
                </div>
            </article>
            <!-- More posts go here -->
        </section>
    </main>
    <footer>
        <p>&copy; 2023 FARMhub Discussion Forum</p>
    </footer>

    <script>
        // Sample data for comments (you can load data from a server)
        const commentsData = [
            { user: 'User2', text: 'This is a great discussion!' },
            // Add more comments here
        ];

        function toggleLike(likeButton) {
            // Toggle the like button (you can implement more logic here)
            likeButton.classList.toggle('liked');
        }

        function toggleCommentForm(commentButton) {
            // Toggle the comment form visibility
            const commentForm = commentButton.parentElement.nextElementSibling;
            commentForm.classList.toggle('show-comment-form');
        }

        function sharePost(shareButton) {
            // Implement sharing logic (e.g., open a share dialog)
            alert('Share this post!');
        }

        function addComment(submitButton) {
            // Get the comment input field and text
            const commentInput = submitButton.parentElement.querySelector('.comment-input');
            const commentText = commentInput.value.trim();

            if (commentText) {
                // Create a new comment element and append it to the comments list
                const commentsList = submitButton.parentElement.previousElementSibling;
                const newComment = document.createElement('li');
                newComment.className = 'comment';
                newComment.innerHTML = `<p>Comment by: User1</p><p>${commentText}</p>`;
                commentsList.appendChild(newComment);

                // Clear the comment input field
                commentInput.value = '';
            }
        }

        // Load comments from data
        window.addEventListener('DOMContentLoaded', () => {
            const commentsList = document.querySelector('.comments-list');
            commentsData.forEach(comment => {
                const newComment = document.createElement('li');
                newComment.className = 'comment';
                newComment.innerHTML = `<p>Comment by: ${comment.user}</p><p>${comment.text}</p>`;
                commentsList.appendChild(newComment);
            });
        });



        // Add this function to handle image uploads
        function handleImageUpload(imageInput) {
            const selectedImage = imageInput.files[0];
            if (selectedImage) {
                // Display the selected image
                const imageDisplay = document.createElement('img');
                imageDisplay.src = URL.createObjectURL(selectedImage);
                imageDisplay.className = 'comment-image';
                const commentForm = imageInput.parentElement;
                commentForm.insertBefore(imageDisplay, commentForm.querySelector('.comment-input'));
            }
        }

        // Modify the addComment function to include image data
        function addComment(submitButton) {
            // Get the comment input field, text, and uploaded image
            const commentInput = submitButton.parentElement.querySelector('.comment-input');
            const commentText = commentInput.value.trim();
            const imageInput = submitButton.parentElement.querySelector('.image-upload-input');
            const image = imageInput.files[0];

            if (commentText || image) {
                // Create a new comment element
                const commentsList = submitButton.parentElement.previousElementSibling;
                const newComment = document.createElement('li');
                newComment.className = 'comment';

                // Add the comment text to the new comment
                newComment.innerHTML = `<p>Comment by: User1</p><p>${commentText}</p>`;

                // If there's an image, add it to the new comment
                if (image) {
                    const imageDisplay = document.createElement('img');
                    imageDisplay.src = URL.createObjectURL(image);
                    imageDisplay.className = 'comment-image';
                    newComment.appendChild(imageDisplay);
                }

                commentsList.appendChild(newComment);

                // Clear the comment input field and image input
                commentInput.value = '';
                imageInput.value = '';
            }
        }

        function addComment(submitButton) {
            // Get the comment input field, text, and uploaded image
            const commentInput = submitButton.parentElement.querySelector('.comment-input');
            const commentText = commentInput.value.trim();
            const imageInput = submitButton.parentElement.querySelector('.image-upload-input');
            const image = imageInput.files[0];

            if (commentText || image) {
                // Create a new comment element
                const commentsList = submitButton.parentElement.previousElementSibling;
                const newComment = document.createElement('li');
                newComment.className = 'comment';

                // Add the comment text to the new comment
                newComment.innerHTML = `<p>Comment by: User1</p><p>${commentText}</p>`;

                // If there's an image, add it to the new comment
                if (image) {
                    const imageDisplay = document.createElement('img');
                    imageDisplay.src = URL.createObjectURL(image);
                    imageDisplay.className = 'comment-image';
                    newComment.appendChild(imageDisplay);

                    // Upload the image to the server and store the path in the database
                    const formData = new FormData();
                    formData.append('image', image);

                    fetch('upload_image.php', {
                        method: 'POST',
                        body: formData,
                    })
                        .then(response => response.json())
                        .then(data => {
                            // Assuming the PHP script returns the uploaded image path
                            if (data.success) {
                                // Insert the image path into the database
                                const imagePath = data.imagePath;
                                // Modify this to insert data into your database using PHP
                                // Example: You can use AJAX to send data to the PHP script
                            }
                        })
                        .catch(error => console.error(error));
                }

                commentsList.appendChild(newComment);

                // Clear the comment input field and image input
                commentInput.value = '';
                imageInput.value = '';
            }
        }


    </script>
</body>

</html>